{% if cart %}
<div class="row animated zoomInUp" id="cart_view">
        <h6 class="font-italic">Note: Delivery time might vary on different locations.</h6>
        <table class="table table-striped table-bordered">
            <thead>
                <th>#</th>
                <th>Product</th>
                <th>View</th>
                <th>Quantity</th>
                <th>Price per unit</th>
                <th>Delivery price per unit</th>
                <th>Total Price</th>
            </thead>
            <tbody id="table-body">
                {% for product in cart %}
                <tr class="text-primary">
                    <td>{{ forloop.counter }}</td>
                    <td><a data-toggle="tooltip" title="Visit {{ product.product }}" href="{% url 'product_detail' product.id %}">{{ product.product }}</a></td>
                    <td class="text-center"><a data-toggle="tooltip" title="<img class='img-fluid' src='{{ product.image }}'/>">
                        <i class="fas fa-eye"></i>
                    </a></td>
                    <td>{{ product.quantity }}</td>
                    <td>₱{{ product.price }}</td>
                    <td>₱{{ product.delivery_price }}</td>
                    <td id="total_price">₱{{ product.total_price }}</td>
                </tr>
                {% endfor %}
                <tr class="text-primary" >
                    <td colspan="6" class="text-right">Grand Total</td>
                    <td colspan="1" id="grand_total"></td>
                </tr>
            </tbody>
        </table>
        </div>
        <div class="row animated fadeInUp">
                <button class="action btn btn-info col-4" data-id="{% url 'customer_form' %}">Checkout</button>
                <button class="clear btn btn-warning col-4">Empty Cart</button>
                <button class="cont btn btn-success col-4"><a href="/#our_products">Continue Shopping</a></button>
        </div>
{% else %}
<div class="animated zoomInUp">
    <center>
    <img class="mx-auto" style="width: 100px" src="/static/images/cart_empty.png"></img>
    </center>
    <h1 class="text-center p-5">Empty Cart</h1>
    <div class="d-flex justify-content-center">
        <button class="btn btn-success col-md-4"><a href="/#our_products"><i class="fas fa-shopping-cart "></i> Go to Shopping</a></button>
    </div>
</div>
{% endif %}
<script>
        $('a[data-toggle="tooltip"]').tooltip({
            animated: 'fade',
            placement: 'bottom',
            html: true
        });
</script>
<script>
    $(document).ready(function(){
        var grand_total = 0;
        {% for product in cart %}
        grand_total = grand_total + {{ product.total_price}};
        {% endfor %}
        $('#grand_total').text('₱' + grand_total.toFixed(2));
    });

</script>
    <script>
            $(".action").each(function() {
                $(this).modalForm({
                    formURL: $(this).data('id')
                });
            });
        
            $('.clear').click(function() {
                $(this).text('Are you sure?').removeClass('btn-warning').addClass('btn-danger');
                $(this).click(function() {
                    $.ajax({
                        url: "{% url 'clear_cart' %}",
                        method: 'POST',
                        data: {
                            csrfmiddlewaretoken: "{{ csrf_token }}"
                        },
                        success(data) {
                            if (data["success"] = true) {
                                $('#cart_view').removeClass('animated zoomInUp').addClass('animated fadeOut fastest');
                                setTimeout(function() {
                                    $('#cart_base').load("{% url 'cart_view' %}");
                                }, 500);
                                $('.clear').remove();
                                $('.action').remove();
                                $('.cont    ').remove();
                            }
                        }
                    })
                });
            });
        </script>