{% extends "admin_base.html" %}
{% load static %}
{% block content %}
{% include "modal.html" %}
<div class="content animated bounceInLeft">
  {% include "alert.html" %}
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title">Customer Orders</h4>
        </div>
        <div class="card-body border">
          <!-- <button class="action px-3 btn btn-info float-right" data-id="% url 'admin_product_create' %"><i class="fa fa-plus pr-2"></i>Product</button> -->
          <table class="table table-striped table-bordered" id="customer-info-table">
            <thead class="text-primary">
              <th class="d-none d-sm-table-cell">#</th>
              <th>Customer Name</th>
              <th class="d-none d-sm-table-cell">Address</th>
              <th>Order ID</th>
              <th>Total Price</th>
              <th>Contact Number</th>
              <th class="d-none d-sm-table-cell">Email</th>
            </thead>
            <tbody>
            {% for customer_info in customer_infos %}
              <tr>
                <td class="d-none d-sm-table-cell">{{ forloop.counter }}</td>
                <td>
                  {{ customer_info.first_name }} {% if customer_info.middle_initial %}{{ customer_info.middle_initial }}.{% endif %} {{ customer_info.last_name }}
                </td>
                <td class="d-none d-sm-table-cell">
                  {{ customer_info.address }}
                </td>
                <td>
                  <a href="{% url 'admin_transactions' %}?id={{ customer_info.final_order.trans_id }}">{{ customer_info.final_order.trans_id }}</a>
                </td>
                <td>
                 â‚±{{ customer_info.final_order.overall_price }}
                </td>
                <td>
                  {{ customer_info.contact_number }}
                </td>
                <td class="d-none d-sm-table-cell">
                  {{ customer_info.email }}
                </td class="d-none d-sm-table-cell">
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="{% static '/assets/dataTables/js/jquery.dataTables.min.js' %}"></script>
<link href="{% static '/assets/dataTables/css/dataTables.material.min.css' %}" rel="stylesheet">
<link href="{% static '/assets/dataTables/css/material.min.css' %}" rel="stylesheet">
<script>
  $(document).ready(function () {
    $('#customer-info-table').DataTable({
      "order": [],
      "columnDefs": [{
        "targets": 'no-sort',
        "orderable": false,
      }],
      language: {
        searchPlaceholder: "Search",
        search: "",
      }
    });
  });

</script>
<script>
  $(".action").each(function () {
    $(this).modalForm({ formURL: $(this).data('id') });
  });
</script>
{% endblock content %}