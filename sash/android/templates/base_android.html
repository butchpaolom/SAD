{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
		
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/loading.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl/owl.carousel.css' %}">
    <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'js/owl/owl.carousel.js' %}"></script>
    <script src="{% static '/assets/js/jquery.bootstrap.modal.forms.js' %}"></script>
  </head>

  <body class="bg-white">
    <div class="row justify-content-center mx-0 text-center cscheme py-1 shadow d-flex fixed-top" style="background-color: #222222;" id="navi_new">
      <a id="sidebarCollapse" class="text-light col-1 my-2 h3 text-left"><i id="menu_nav" class="mt-2 nav_it fa fa-bars text-secondary"></i></a>
      <a id="homer" class="text-light col-2 my-2 h3 text-right"><i id="all_nav" class="mt-2 nav_it fa fa-th text-secondary"></i></a>
      <a href="#xd1" id="saler" class="text-light col-2 my-2 h3 tbar_cart text-right"><i id="sale_nav" class="mt-2 nav_it fa fa-tag text-secondary"></i></a>
      <a id="carter" class="text-light col-2 my-2 h3 tbar_cart text-right"><i id="cart_nav" class="mt-2 nav_it fa fa-shopping-cart mr-2 text-secondary"></i></a>
      <div class="col-5 my-2">
      <div class="input-group text" id="search_bar">
          <input type="text" class="form-control border text-light cscheme" style="background-color: #222222;" placeholder="Search" id="search_input">
          <div class="input-group-append">
              <button class="btn btn-outline-light" id="search_button" type="button" disabled><i class="fa fa-search"></i></button>
          </div>
      </div>
      </div>



      <!-- <a id="homer" class="text-light col-3 my-2 h5"><i class="fa fa-home"></i> Home</a>
      <a href="{% url 'an_cart' %}" class="text-light col-3 my-2 h5 tbar_cart"><i class="fa fa-shopping-cart mr-2"></i>Cart</a>
      <a href="#xd1" id="saler" class="text-light col-3 my-2 h5 tbar_cart"><i class="fa fa-arrow-down"></i> Sale!</a> -->


    </div>
    <div id="loading" class="h-100 w-100 align-content-center flex-wrap d-flex justify-content-center" style="background-color: #ffffff; z-index:500; position: fixed;">
      <!-- <div class="loadingio-spinner-double-ring-gnu4acl4iv5 animated fadeOut faster"><div class="ldio-2581lugbjgw">
        <div></div>
        <div></div>
        <div><div></div></div>
        <div><div></div></div>
        </div></div> -->

        <div class="loadingio-spinner-ball-enbtzn3w0y9 animated fadeOut faster"><div class="ldio-6ey3jxb8i8f">
          <div></div>
          </div></div>
    </div>

		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar" class="position-fixed h-100 shadow cscheme pt-4" style="z-index:4;">
				<!-- <div class="custom-menu">
					<button type="button"  class="btn btn-primary">
	          <i id="icon_toolbar" class="fa fa-caret-right"></i>
	          <span class="sr-only">Toggle Menu</span>
	        </button>
        </div> -->
				<div class="p-4">
          <h1 class="mb-1 mt-4 pt-2"><a class="logo">Adidas</a></h1>
          <span id="address"></span>
	        <ul class="list-unstyled components mb-5">
	          <li>
	            <a class="sidenavlist" id="side_all_nav" data-id="all_nav"><span class="fa fa-home mr-3"></span>Home</a>
	          </li>
	          <li>
	            <a class="sidenavlist" id="side_cart_nav" data-id="cart_nav"><span class="fa fa-shopping-cart mr-3"></span>Cart<span class="ml-1" id="cart_count"></span></a>
            </li>
            <li>
              <a class="sidenavlist" id="side_orders_nav" data-id="none"><span class="fa fa-truck mr-3"></span>Track your Order</a>
	          </li>
	          <li>
              <a class="sidenavlist" id="side_about_nav" data-id="none"><span class="fa fa-info mr-4"></span>About</a>
            </li>
	        </ul>
	      </div>
      </nav>
        <div id="content" class="d-none">
          <div class="container-fluid d-flex justify-content-center mt-4 pt-4 animated fadeIn">
            <div class="logo_img col-10 p-4 mt-2">
            </div>
          </div>
        <div class="container-fluid car px-0">
        </div>
        {% block content %}
        {% endblock content %}
		  </div>

    <!-- <script src="{% static 'js/jquery.min.js' %}"></script> -->
    <script src="{% static 'js/popper.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        $(document).ready(function(){
          const count = JSON.parse(window.localStorage.getItem('cart')).length;
          const last = JSON.parse(window.localStorage.getItem('last'))
          $('#cart_count').html('(' + count + ')');
          $(`#${last.tab}`).removeClass('text-secondary');
        });
      
      $("body").css("overflow-y", "hidden");
      $('.prod_container').hide();
      $(window).on("load", function() {
      setTimeout(function(){
        $("#content").removeClass('d-none');
      }, 400);
      setTimeout(function(){
        $('#loading').remove();
        $("body").css("overflow", "auto");
        $('.prod_container').show();
      }, 500);
    });
    $(document).on('click', '#content', function(){
        $('#sidebar').removeClass('active');
    });

      $("#sidebarCollapse").click(function(){
        if ($('#sidebar').hasClass('active')){
          $('#icon_toolbar').removeClass('fa-caret-right').addClass('fa-caret-left');
        }
        else{
          $('#icon_toolbar').removeClass('fa-caret-left').addClass('fa-caret-right');
        }
      });

      $.ajax({
            url: "/new_api/api_frontasset/1",
            method: 'GET',
            dataType: 'json',
            success: function(data) {
                  setTimeout(function (){
                    $('.cscheme').css("background-color", data.colorscheme);
                  },200);
                  $('.logo').html(data.company_name);
                  $('#address').html(data.address);
                  var t = document.querySelector('#car_template');
                  var l = document.querySelector('#img_template');
                  l.content.querySelector('#img_logo').src = data.company_logo;
                  t.content.querySelector('#img1').src = data.car_img1;
                  t.content.querySelector('#img2').src = data.car_img2;
                  t.content.querySelector('#img3').src = data.car_img3;
                  var clone = document.importNode(t.content, true);
                  var clone_logo = document.importNode(l.content, true);
                  if (!data.car_img2){
                    clone.querySelector('.img2').remove();
                  }
                  if (!data.car_img3){
                    clone.querySelector('.img3').remove();
                  }
                  document.querySelector('.car').appendChild(clone);
                  document.querySelector('.logo_img').appendChild(clone_logo);
              }
        });
        $(document).on('click', '#saler' ,function(){
        let last = JSON.parse(window.localStorage.getItem('last'));
        last.sale = 'True';
        last.tab = 'sale_nav';
        window.localStorage.setItem('last', JSON.stringify(last));
        window.location = '/android';
        });

    $(document).on('click', '#homer' ,function(){
        let last = JSON.parse(window.localStorage.getItem('last'));
        last.sale = 'False';
        last.srch = '';
        last.tab = 'all_nav';
        window.localStorage.setItem('last', JSON.stringify(last));
        window.location = '/android';
    });

    $(document).on('click', '#carter' ,function(){
        let last = JSON.parse(window.localStorage.getItem('last'));
        last.tab = 'cart_nav';
        window.localStorage.setItem('last', JSON.stringify(last));
        window.location = "{% url 'an_cart' %}";
    });

    $(document).on('click', '#sidebarCollapse' ,function(){
      $('#menu_nav').toggleClass('text-secondary');
    });
    
    $(document).on('click', '.sidenavlist' ,function(){
      let last = JSON.parse(window.localStorage.getItem('last'));
      last.tab = $(this).data('id');
      window.localStorage.setItem('last', JSON.stringify(last));
      if ($(this).attr("id") == 'side_all_nav'){
        window.location = "{% url 'an_landing' %}";
      }
      else if ($(this).attr("id") == 'side_cart_nav'){
        window.location = "{% url 'an_cart' %}";
      }
      else if ($(this).attr("id") == 'side_orders_nav'){
        window.location = "{% url 'an_transactions' %}";
      }
      else {
        window.location = "{% url 'an_about' %}";
      }
    });
  </script>

  </body>
</html>
